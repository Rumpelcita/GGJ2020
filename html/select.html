<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>GGJ2020</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <!-- minify -->
  <link href="https://unpkg.com/nes.css@2.3.0/css/nes.min.css" rel="stylesheet" />
  <!-- latest -->
  <link href="https://unpkg.com/nes.css@latest/css/nes.min.css" rel="stylesheet" />
  <!-- core style only -->
  <link href="https://unpkg.com/nes.css/css/nes-core.min.css" rel="stylesheet" />

  <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
  <link rel='stylesheet' type='text/css' media='screen' href='slider.css'>

  <link href="https://fonts.googleapis.com/css?family=Press+Start+2P&display=swap" rel="stylesheet">
  <script>
    const allThreads = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'];

    let selectedThreads = [];
    const find = (arr, number) => arr.find(element => element === number);
    const greyOutThreads = () => allThreads.forEach(
      (thread) => {
        if (!find(selectedThreads, thread)) {
          // console.log('greyout ' + thread)
          document.getElementById('btn-' + thread).classList.add('disabled');
        }
        return
      }
    )
    const greyInThreads = () => allThreads.forEach(
      (thread) => {
        if (!find(selectedThreads, thread)) {
          // console.log('greyin ' + thread)
          document.getElementById('btn-' + thread).classList.remove('disabled');
        }
        return
      }
    )



    const toggleSelect = (number) => {
      //limit ammount of threads here
      if (selectedThreads.length < 4) {
        if (find(selectedThreads, number)) {
          document.getElementById("btn-" + number).classList.remove('active');
          const index = selectedThreads.indexOf(number);
          if (index > -1) {
            selectedThreads.splice(index, 1);
          }

          if (selectedThreads.length < 4) {
            greyInThreads();
          };

          console.log('deselected ' + number)
          console.log('threads selected ' + selectedThreads)
        } else {
          document.getElementById("btn-" + number).classList.add('active');
          selectedThreads.push(number);

          if (selectedThreads.length == 4) {
            greyOutThreads()
          }

          console.log('selected ' + number)
          console.log('threads selected ' + selectedThreads)
        }
      } else {
        greyOutThreads();
        if (find(selectedThreads, number)) {
          document.getElementById("btn-" + number).classList.remove('active');
          const index = selectedThreads.indexOf(number);
          if (index > -1) {
            selectedThreads.splice(index, 1);
          }

          if (selectedThreads.length < 4) {
            greyInThreads();
          };

          console.log('deselected ' + number)
          console.log('threads selected ' + selectedThreads)
        }

      }
    }
  </script>
</head>

<body>
  <div class="main-game-container nes-container">
    <main class="select-screen">
      <header>
        <span class="nes-text is-success home-title">Select a patch and color threads</span>
      </header>
      <section>
        <div class="wrapper">
          <input checked type=radio name="slider" id="slide1" />
          <input type=radio name="slider" id="slide2" />
          <input type=radio name="slider" id="slide3" />
          <input type=radio name="slider" id="slide4" />
          <input type=radio name="slider" id="slide5" />

          <div class="slider-wrapper">
            <div class=inner>
              <article>
                <!-- <div class="info top-left">
                <h3>Malacca</h3>
              </div> -->
                <img src="https://farm9.staticflickr.com/8059/28286750501_dcc27b1332_h_d.jpg" />
              </article>

              <article>
                <!-- <div class="info bottom-right">
                <h3>Cameron Highland</h3>
              </div> -->
                <img src="https://farm6.staticflickr.com/5812/23394215774_b76cd33a87_h_d.jpg" />
              </article>

              <article>
                <!-- <div class="info bottom-left">
                <h3>New Delhi</h3>
              </div> -->
                <img src="https://farm8.staticflickr.com/7455/27879053992_ef3f41c4a0_h_d.jpg" />
              </article>

              <article>
                <!-- <div class="info top-right">
                <h3>Ladakh</h3>
              </div> -->
                <img src="https://farm8.staticflickr.com/7367/27980898905_72d106e501_h_d.jpg" />
              </article>

              <article>
                <!-- <div class="info bottom-left">
                <h3>Nubra Valley</h3>
              </div> -->
                <img src="https://farm8.staticflickr.com/7356/27980899895_9b6c394fec_h_d.jpg" />
              </article>
            </div>
            <!-- .inner -->
          </div>
          <!-- .slider-wrapper -->

          <div class="slider-prev-next-control">
            <label class="nes-btn is-primary" for=slide1></label>
            <label class="nes-btn is-primary" for=slide2></label>
            <label class="nes-btn is-primary" for=slide3></label>
            <label class="nes-btn is-primary" for=slide4></label>
            <label class="nes-btn is-primary" for=slide5></label>
          </div>
          <!-- .slider-prev-next-control -->

          <!-- <div class="slider-dot-control">
          <label for=slide1></label>
          <label for=slide2></label>
          <label for=slide3></label>
          <label for=slide4></label>
          <label for=slide5></label>
        </div> -->
          <!-- .slider-dot-control -->
        </div>

      </section>
      <footer>
        <div class="threads">
          <button id="btn-1" class="nes-btn thread is-success" onclick="toggleSelect('1')">1</button>
          <button id="btn-2" class="nes-btn thread is-primary" onclick="toggleSelect('2')">2</button>
          <button id="btn-3" class="nes-btn thread is-warning" onclick="toggleSelect('3')">3</button>
          <button id="btn-4" class="nes-btn thread is-error " onclick="toggleSelect('4')">4</button>
          <button id="btn-5" class="nes-btn thread" onclick="toggleSelect('5')">5</button>
          <button id="btn-6" class="nes-btn thread is-error " onclick="toggleSelect('6')">6</button>
          <button id="btn-7" class="nes-btn thread is-error " onclick="toggleSelect('7')">7</button>
          <button id="btn-8" class="nes-btn thread is-warning" onclick="toggleSelect('8')">8</button>
          <button id="btn-9" class="nes-btn thread is-error " onclick="toggleSelect('9')">9</button>
          <button id="btn-10" class="nes-btn thread" onclick="toggleSelect('10')">10</button>
          <button id="btn-11" class="nes-btn thread is-success" onclick="toggleSelect('11')">11</button>
          <button id="btn-12" class="nes-btn thread is-primary" onclick="toggleSelect('12')">12</button>

        </div>
      </footer>
    </main>
  </div>
</body>

</html>